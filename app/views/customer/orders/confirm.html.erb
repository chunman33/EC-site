<div class="container">
  <div class="row">
    <h5>注文情報確認</h5>
  </div>
  <div class="row">
   <div class="col">
      <table border="1", style="border-collapse: collapse" cellPadding="10">
        <thead>
          <th bgcolor="#EEEEEE">商品名</th>
          <th bgcolor="#EEEEEE">単価(税込)</th>
          <th bgcolor="#EEEEEE">数量</th>
          <th bgcolor="#EEEEEE">小計</th>
        </thead>
       <% @cart_items.each do |cart_item| %>
        <tbody>
          <td><%= cart_item.item.name %></td>
          <td><%= cart_item.item.add_tax_price.to_s(:delimited) %></td>
          <td><%= cart_item.amount %></td>
          <td><%= cart_item.total_price.to_s(:delimited) %></td>
          <% @total += cart_item.total_price %><!--カート内の全商品の合計金額を表示-->
          
        </tbody>
       <% end %>
      </table>
      
      <table border="1", style="border-collapse: collapse" cellPadding="10">
       <tr>
        <td bgcolor="#EEEEEE">送料</td>
        <td>800</td>
       </tr>
       <tr>
        <td bgcolor="#EEEEEE">商品合計</td>
        <td><%= @total.to_s(:delimited) %></td> <!--20行目で定義した＠total(合計金額)を呼び出している。-->
       </tr>    
       <tr>
        <td bgcolor="#EEEEEE">請求金額</td>
        <td><%= @total + 800 %></td>
       </tr>
      </table>
   </div>
  </div>
   
  <div class="row">
    <div class="col">
     
     <h5><strong>支払方法</strong></h5>
     <%= @order.payment_method_i18n %>
     
    </div>
  </div>
   
   <div class="row">
     <div class="col">
     
     <h5><strong>お届け先</strong></h5>
     〒<%= @order.post_code %>
     <%= @order.address %><br>
     <%= @order.name %>
     
     </div>
   </div>
   
   <%= form_with model: @order, url: orders_path do |f| %>
    <%= f.hidden_field :name, :value => @order.name %>
    <%= f.hidden_field :post_code, :value => @order.post_code %>
    <%= f.hidden_field :address, :value => @order.address %>
    <%= f.hidden_field :payment_price, :value => @total + 800 %>
    <%= f.submit "注文を確定する", "data-confirm" => "本当に注文しますか？", class: "btn btn-success"%>
   <% end %>
  
</div>